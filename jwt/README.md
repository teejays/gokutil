# Go JWT

A very simple Go library for handling JSON Web Token based authentication.

I created this for my own personal side projects. I helps handles basic JWT tokens with much fanfare.

### What is JWT?
JWT stands for JSON Web Tokens. JWT is simply string, with three parts. Each part is base64 endcoded, and concatentaed using a `.`. A sample JWT will look something like `eys0m3g1b3r15h.hAIWMS7sb.hsi64sg2u`. As you can see, it has three parts separated by a `.`.

The first part of a JWT is a header. This just contains some meta information about the token. We don't really need to worry about it for now.

The second part of the token is the "claims" token. This part is a simple JSON object with important information about the token e.g. who is user that is signed in, when does the token expire etc.

The third part is the signature. A signature is created by taking the first two part of the JWT token, and encrpting it using a secret encryption key. This is done by whoever creates the token (also called the issuer). The issuer then, if ever provided with a random token, can simply generate a new signature for it, compare it to the existing signature on the token, and if the existing and new signature matches, it can verify that the original token was generated and signed by itself. 

### Using this library

In order to generate a JWT, we need a secret encryption key for the signature. We'll use a standard string for it but it could be as advanced as some likes.

```golang

import (
    "log"

    "github.com/teejays/goku-util/jwt"
)

var secret = []byte("i am a very secret key")

func main() {

    client, err := jwt.NewClient(secret)
    if err != nil {
        log.Fatal(err)
    }

    // Create a Token

    newClaim := jwt.BaseClaim{
        // Issuer: Who issued this token?
        Issuer: "go-jwt-example",
        // Subject: The identifer of the client/user that this token authenticates e.g. UserUD
        Subject: "<insert> user id here",
        // Audience: Not sure what this is used for
        Audience: "",
        // ExpireAt: JWT should not be valid after this time
        ExpireAt: time.Now().Add(12 * time.Hour).String(),
        // NotBefore: JWT should not be valid before this time
        NotBefore: time.Now().String(),
        // IssuedAt: When was the JWT issued
        IssuedAt: time.Now().String(),
        // UniqueID: A unique identifer that can act a s a reference for this JWT
        UniqueID: ""
    }

    generatedToken, err := client.CreateToken(newClaim)
    if err != nil {
        log.Fatal(err)
    }

    // We have our token!
    fmt.Println("Token: " + generatedToken)

    // Verify that, given a token, it is us who generated it
    goodToken := generatedToken // we know it's good since we generated it
    
    var incomingClaim jwt.BaseClaim
    err = client.VerifyAndDecode(goodToken, &incomingClaim)
    if err != nil {
        // if the goodToken was generated by us, the err will be nil
        log.Fatal(err)
    }

    // The incomingClaim should be the same as newClaim, since the token we used was generated using the newClaim
    fmt.Printf("Incoming Claim: %+v", incomingClaim)
    
}
```
 
